const express = require('express');
const QueryBuilder = require('../utils/query_builder');
const db = require('../services/db')
const router = express.Router();
const disjson = [1, 6, 8, 35, 37, 76, 82, 103, 142, 186, 190, 209, 237, 251, 442, 542, 547, 573, 582, 611, 637, 702, 734, 756, 823, 826, 856, 977, 980, 999, 1003, 1015, 1024, 1073, 1083, 1089, 1095, 1101, 1107, 1110, 1120, 1129, 1135, 1139, 1145, 1202, 1205, 1226, 1232, 1233, 1236, 1241, 1244, 1246, 1258, 1263, 1271, 1282, 1288, 1300, 1307, 1312, 1322, 1332, 1339, 1350, 1351, 1366, 1394, 1399, 1405, 1508, 1513, 1566, 1576, 1602, 1603, 1604, 1605, 1606, 1607, 1608, 1609, 1610, 1611, 1612, 1613, 1614, 1615, 1652, 1720, 1734, 1769, 1893, 1907, 1930, 1947, 1949, 1955, 2039, 2171, 2237, 2243, 2281, 2319, 2325, 2329, 2360, 2373, 2474, 2479, 2562, 2660, 2666, 2676, 2710, 2726, 2732, 2840, 2903, 2929, 2936, 3012, 3083, 3091, 3097, 3103, 3148, 3154, 3193, 3204, 3274, 3275, 3335, 3337, 3338, 3395, 3443, 3488, 3491, 3507, 3509, 3599, 3607, 3614, 3891, 3958, 3972, 4047, 4053, 4054, 4055, 4074, 4091, 4092, 4171, 4256, 4323, 4336, 4353, 4356, 4361, 4365, 4369, 4448, 4461, 4464, 4474, 4487, 4502, 4757, 4765, 4766, 4785, 4786, 4788, 4789, 4792, 4794, 4795, 4797, 4799, 4802, 4804, 4807, 4810, 4813, 4816, 4817, 4818, 4977, 5002, 5148, 5171, 5234, 5238, 5358, 5373, 5463, 5473, 5474, 5489, 5528, 5555, 5562, 5586, 5595, 5619, 5720, 5737, 5743, 6125, 6151, 6154, 6217, 6225, 6292, 6303, 6348, 6354, 6417, 6426, 6448, 6534, 6542, 6586, 6644, 6655, 6725, 6728, 6738, 6776, 6782, 6783, 6789, 6792, 6798, 6802, 6804, 6812, 6826, 6835, 6842, 6848, 6853, 6863, 6890, 6892, 6899, 7210, 7215, 7303, 7351, 7357, 7366, 7376, 7603, 7624, 7644, 7651, 7701, 7704, 7733, 7747, 7947, 7978, 8212, 8221, 8227, 8458, 8459, 8516, 8526, 8530, 8534, 8535, 8543, 8545, 8548, 8549, 8554, 8555, 8559, 8564, 8565, 8581, 8585, 8631, 8633, 8639, 8662, 8667, 8707, 8763, 8815, 8851, 8870, 8878, 8888, 8894, 8900, 9070, 9076, 9119, 9121, 9126, 9137, 9157, 9167, 9179, 9194, 9198, 9254, 9369, 9381, 9392, 9462, 9516, 9618, 9691, 9698, 9747, 9755, 9853, 9924, 9928, 9940, 9948, 9952, 9956, 9962, 9969, 9980, 10036, 10091, 10130, 10137, 10247, 10249, 10250, 10251, 10326, 10352, 10353, 10356, 10358, 10364, 10365, 10372, 10374, 10378, 10381, 10384, 10404, 10408, 10435, 10444, 10454, 10455, 10463, 10468, 10473, 10475, 10479, 10480, 10486, 10489, 10503, 10506, 10511, 10517, 10523, 10552, 10556, 10561, 10570, 10573, 10579, 10598, 10634, 10651, 10653, 10658, 10697, 10698, 10701, 10769, 10772, 10783, 10787, 10790, 10794, 10795, 10799, 10803, 10826, 10830, 11102, 11111, 11193, 11251, 11254, 11259, 11340, 11346, 11451, 11515, 11517, 11613, 11618, 11631, 11826, 11829, 11836, 11930, 11933, 11952, 11971, 11975, 12242, 12264, 12265, 12275, 12284, 12293, 12300, 12311, 12315, 12400, 12421, 12455, 12460, 12471, 12500, 12517, 12534, 12548, 12559, 12637, 12653, 12658, 12722, 12730, 12736, 12760, 12797, 12816, 12832, 12852, 12902, 12916, 12924, 12929, 12935, 12938, 12940, 12944, 12947, 12953, 12971, 12975, 12985, 13004, 13116, 13249, 13262, 13372, 13418, 13430, 13457, 13639, 13643, 13669, 13708, 13717, 13722, 13765, 13772, 13826, 13829, 13842, 13847, 13880, 13890, 13932, 13942, 13947, 13949, 13971, 13990, 13994, 14317, 14345, 14349, 14372, 14379, 14453, 14462, 14473, 14485, 14510, 14518, 14541, 14584, 14626, 14658, 14659, 14788, 14791, 14819, 14850, 15005, 15011, 15015, 15019, 15022, 15026, 15031, 15036, 15040, 15043, 15047, 15077, 15080, 15092, 15112, 15187, 15220, 15225, 15236, 15246, 15253, 15261, 15263, 15294, 15324, 15374, 15454, 15458, 15482, 15530, 15539, 15550, 15683, 15724, 15739, 15820, 15823, 15840, 16015, 16018, 16037, 16039, 16055, 16077, 16091, 16187, 16294, 16297, 16329, 16342, 16353, 16356, 16364, 16373, 16379, 16388, 16390, 16393, 16402, 16413, 16464, 16467, 16472, 16482, 16601, 16618, 16621, 16685, 16700, 16731, 16737, 16762, 16838, 16917, 16930, 16942, 16952, 16955, 16965, 16968, 16969, 16970, 16972, 16975, 16977, 16979, 16981, 16983, 17007, 17040, 17057, 17069, 17091, 17111, 17115, 17117, 17123, 17130, 17239, 17254, 17269, 17281, 17294, 17304, 17317, 17332, 17545, 17554, 17629, 17641, 17656, 17699, 17703, 17801, 17812, 17856, 17859, 17866, 17870, 17872, 17925, 17936, 17994, 18004, 18285, 18311, 18314, 18342, 18511, 18513, 18537, 18542, 18592, 18734, 18770, 18775, 18865, 18977, 18982, 18991, 19132, 19134, 19212, 19213, 19238, 19259, 19262, 19264, 19266, 19276, 19351, 19367, 19374, 19401, 19458, 19464, 19480, 19497, 19500, 19504, 19797, 19802, 19, 19843, 19897, 19944, 20037, 20080, 20082, 20126, 20158, 20165, 20170, 20244, 20252, 20260, 20284, 20308, 20331, 20338, 20346, 20353, 20380, 20390, 20413, 20433, 20451, 20457, 20464, 20466, 20468, 20476, 20477, 20479, 20483, 20484, 20492, 20497, 20516, 20522, 20546, 20556, 20576, 20584, 20591, 20598, 20615, 20623, 20787, 20789, 20791, 20793, 20797, 20798, 20801, 20802, 20803, 20808, 20809, 20823, 20895, 20960, 20964, 20981, 20983, 20985, 20987, 20990, 21020, 21024, 21027, 21030, 21055, 21134, 21140, 21229, 21230, 21242, 21273, 21279, 21283, 21287, 21290, 21319, 21326, 21331, 21342, 21371, 21373, 21376, 21391, 21411, 21452, 21494, 21571, 21585, 21586, 21608, 21775, 21874, 21896, 22035, 22060, 22080, 22090, 22142, 22220, 22225, 22245, 22282, 22287, 22289, 22294, 22295, 22329, 22332, 22367, 22525, 22553, 22555, 22658, 22748, 22773, 22795, 22840, 22921, 22983, 22989, 23034, 23039, 23084, 23086, 23350, 23355, 23390, 23393, 23406, 23427, 23433, 23435, 23438, 23444, 23445, 23463, 23493, 23496, 23530, 23665, 23672, 23692, 23697, 23706, 23756, 23767, 23781, 23917, 23975, 23990, 24106, 24142, 24219, 24224, 24257, 24282, 24286, 24292, 24580, 24622, 24636, 24641, 24693, 24700, 24770, 24777, 24881, 24924, 24927, 24984, 24999, 25003, 25007, 25088, 25154, 25156, 25161, 25180, 25192, 25195, 25260, 25344, 25377, 25379, 25380, 25382, 25385, 25387, 25388, 25389, 25392, 25394, 25399, 25401, 25402, 25413, 25426, 25434, 25503, 25513, 25563, 25570, 25642, 25646, 25648, 25650, 25653, 25724, 25735, 25736, 25738, 25747, 25748, 25751, 25752, 25760, 25762, 25765, 25768, 25774, 25776, 25825, 25830, 25835, 25837, 25987, 26002, 26003, 26108, 26139, 26176, 26219, 26314, 26321, 26324, 26333, 26345, 26370, 26394, 26400, 26467, 26475, 26476, 26477, 26481, 26482, 26483, 26544, 26591, 26602, 26673, 26696, 26716, 26721, 26740, 26743, 26755, 26827, 26832, 26836, 26839, 26842, 26847, 26853, 26854, 26856, 26883, 26898, 26938, 27023, 27042, 27090, 27147, 27150, 27307, 27373, 27423, 27434, 27461, 27570, 27572, 27576, 27580, 27582, 27584, 27586, 27589, 27595, 27598, 27599, 27603, 27605, 27609, 27611, 27620, 27623, 27627, 27643, 27655, 27968, 27989, 27998, 28021, 28035, 28043, 28076, 28136, 28282, 28301, 28330, 28331, 28366, 28419, 28421, 28430, 28434, 28438, 28444, 28450, 28473, 28481, 28520, 28524, 28688, 28695, 28710, 28713, 28716, 28721, 28723, 28726, 28759, 28763, 28766, 28770, 28950, 28990, 29015, 29022, 29166, 29204, 29246, 29255, 29257, 29261, 29266, 29270, 29275, 29290, 29292, 29299, 29303, 29368, 29407, 29414, 29419, 29588, 29727, 29795, 29823, 29855, 29916, 29919, 29969, 30144, 30193, 30219, 30399, 30411, 30437, 30442, 30451, 30466, 30473, 30513, 30520, 30558, 30573, 30953, 30962, 31006, 31056, 31193, 31194, 31226, 31235, 31237, 31241, 31247, 31451, 31453, 31476, 31477, 31478, 31479, 31480, 31523, 31542, 31619, 31623, 31628, 31815, 31890, 31940, 32002, 32045, 32049, 32053, 32186, 32229, 32282, 32286, 32319, 32320, 32326, 32329, 32412, 32428, 32476, 32477, 32487, 32488, 32489, 32505, 32506, 32513, 32514, 32541, 32588, 32607, 32610, 32633, 32634, 32637, 32648, 32674, 32682, 32706, 32723, 32737, 32774, 32790, 32805, 32812, 32844, 32845, 32846, 32913, 32914, 32915, 32934, 33039, 33043, 33057, 33070, 33088, 33106, 33182, 33226, 33230, 33239, 33248, 33310, 33318, 33337, 33351, 33355, 33406, 33419, 33442, 33446, 33527, 33529, 33533, 33577, 33583, 33826, 33847, 33893, 33909, 33996, 34003, 34141, 34198, 34205, 34219, 34222, 34473, 34502, 34567, 34570, 34571, 34631, 34632, 34636, 34654, 34662, 34732, 34739, 34743, 34757, 34764, 34767, 34768, 34773, 34777, 34781, 34785, 34788, 34791, 34835, 34838, 34839, 34843, 34846, 34848, 34849, 34850, 34853, 34854, 34855, 34863, 34868, 34880, 34889, 34986, 35045, 35065, 35251, 35271, 35275, 35294, 35336, 35366, 35374, 35412, 35495, 35520, 35528, 35706, 35709, 35718, 35726, 35787, 35804, 35966, 35983, 36074, 36075, 36085, 36094, 36100, 36104, 36106, 36116, 36119, 36142, 36149, 36157, 36163, 36166, 36190, 36216, 36225, 36462, 36487, 36490, 36495, 36498, 36500, 36502, 36508, 36510, 36518, 36573, 36576, 36579, 36585, 36588, 36591, 36595, 36605, 36616, 36710, 36776, 36803, 36828, 36834, 36847, 36879, 36894, 36916, 36917, 36919, 36926, 36982, 36985, 37032, 37038, 37055, 37058, 37061, 37063, 37066, 37203, 37220, 37222, 37307, 37308, 37311, 37312, 37315, 37319, 37320, 37349, 37352, 37354, 37375, 37538, 37619, 37622, 37638, 37640, 37645, 37649, 37652, 37654, 37655, 37659, 37660, 37667, 37691, 37698, 37702, 37705, 37710, 37716, 37718, 37722, 37726, 37728, 37730, 37734, 37739, 37761, 37776, 37788, 37818, 37855, 38029, 38039, 38044, 38213, 38216, 38217, 38219, 38220, 38221, 38225, 38229, 38231, 38233, 38236, 38247, 38273, 38318, 38351, 38352, 38557, 38577, 38584, 38586, 38611, 39043, 39057, 39066, 39361, 39365, 39407, 39488, 39497, 39500, 39501, 39502, 39505, 39510, 39520, 39561, 39574, 39587, 39633, 39673, 39674, 39679, 39741, 39753, 39780, 39795, 39801, 39828, 39836, 39839, 39843, 39867, 39907, 39961, 40175, 40182, 40319, 40343, 40401, 40416, 40477, 40496, 40498, 40512, 40526, 40530, 40606, 40607, 40634, 40638, 40690, 40733, 40737, 40828, 40831, 40835, 40837, 40840, 40843, 40846, 40859, 40865, 40866, 40875, 40971, 41006, 41047, 41049, 41053, 41057, 41059, 41065, 41114, 41162, 41184, 41194, 41202, 41205, 41214, 41215, 41293, 41333, 41341, 41513, 41540, 41548, 41554, 41558, 41564, 41712, 41715, 41718, 41723, 41725, 41728, 41733, 41748, 41757, 41867, 41880, 41928, 41929, 41988, 42032, 42038, 42169, 42172, 42215, 42232, 42261, 42338, 42425, 42458, 42560, 42576, 42620, 42623, 42702, 42708, 42739, 42838, 42840, 42842, 42846, 42849, 42850, 42852, 42854, 42857, 42867, 43001, 43042, 43358, 43365, 43384, 43389, 43447, 43553, 43557, 43751, 43760, 43767, 43770, 43793, 43794, 43860, 43930, 43964, 43995, 44175, 44260, 44266, 44523, 44530, 44613, 44617, 44628, 44720, 44727, 44924, 44928, 44939, 44942, 44965, 45113, 45120, 45126, 45135, 45145, 45249, 45253, 45385, 45398, 45756, 45805, 45808, 45817, 45858, 45899, 45907, 45919, 45965, 46074, 46079, 46083, 46085, 46087, 46089, 46090, 46291, 46295, 46327, 46438, 46569, 46571, 46574, 46578, 46581, 46584, 46585, 46589, 46593, 46600, 46603, 46611, 46614, 46631, 46634, 46637, 46639, 46737, 46751, 46818, 46824, 46836, 46840, 46841, 46843, 46848, 46851, 46893, 46904, 47049, 47059, 47094, 47106, 47109, 47127, 47135, 47239, 47254, 47256, 47472, 47478, 47501, 47505, 47517, 47526, 47539, 47624, 47628, 47638, 47759, 47775, 47829, 47839, 47857, 47972, 48076, 48151, 48182, 48218, 48291, 48327, 48335, 48413, 48469, 48526, 48533, 48676, 48681, 48697, 48753, 48761, 48834, 48837, 48882, 48891, 48950, 48971, 48984, 49052, 49122, 49139, 49145, 49158, 49162, 49218, 49642, 49645, 49665, 49744, 49753, 49784, 49883, 49884, 49885, 49955, 49978, 50046, 50052, 50055, 50058, 50074, 50088, 50097, 50133, 50150, 50163, 50230, 50271, 50279, 50291, 50305, 50356, 50387, 50480, 50494, 50499, 50505, 50525, 50526, 50527, 50528, 50530, 50531, 50533, 50536, 50540, 50542, 50560, 50571, 50658, 50662, 50703, 50716, 50812, 50827, 50943, 51038, 51084, 51086, 51151, 51178, 51296, 51342, 51406, 51410, 51414, 51420, 51422, 51479, 51483, 51496, 51572, 51618, 51623, 51634, 51635, 51638, 51639, 51708, 51738, 51742, 51745, 51757, 51896, 51903, 51961, 51967, 51976, 51979, 52008, 52012, 52021, 52129, 52341, 52346, 52350, 52353, 52357, 52366, 52369, 52370, 52388, 52424, 52428, 52435, 52518, 52587, 52598, 52642, 52648, 52654, 52688, 52692, 52705, 52739, 52821, 52832, 52836, 52898, 52908, 52940, 52951, 53164, 53173, 53192, 53225, 53233, 53343, 53355, 53390, 53400, 53405, 53497, 53498, 53499, 53500, 53502, 53503, 53504, 53506, 53508, 53509, 53511, 53512, 53513, 53514, 53515, 53516, 53517, 53518, 53525, 53527, 53545, 53547, 53554, 53557, 53566, 53715, 53721, 53736, 53801, 53986, 54022, 54113, 54114, 54127, 54162, 54218, 54227, 54228, 54240, 54269, 54270, 54271, 54272, 54279, 54314, 54319, 54325, 54329, 54436, 54441, 54445, 54546, 54625, 54647, 54659, 54664, 54694, 54699, 54733, 54735, 54736, 54766, 54767, 54788, 54832, 54867, 54914, 54999, 55062, 55063, 55067, 55070, 55075, 55085, 55088, 55155, 55163, 55395, 55418, 55428, 55438, 55471, 55535, 56229, 56234, 56272, 56273, 56298, 56304, 56312, 56318, 56331, 56497, 56870, 56875, 56881, 56898, 56907, 56914, 56920, 57038, 57042, 57047, 57053, 57056, 57066, 57070, 57072, 57074, 57083, 57087, 57092, 57097, 57104, 57121, 57126, 57134, 57142, 57147, 57168, 57169, 57180, 57182, 57259, 57294, 57298, 57326, 57378, 57384, 57388, 57395, 57419, 57434, 57435, 57439, 57442, 57492, 57502, 57583, 57584, 57585, 57586, 57587, 57588, 57589, 57597, 57601, 57606, 57609, 57613, 57617, 57641, 57763, 57771, 57778, 57789, 57835, 57839, 57886, 57932, 58001, 58004, 58019, 58031, 58033, 58146, 58149, 58156, 58238, 58239, 58281, 58335, 58350, 58434, 58436, 58475, 58501, 58507, 58530, 58531, 58535, 58536, 58537, 58538, 58544, 58545, 58546, 58547, 58550, 58614, 58619, 58924, 59006, 59010, 59013, 59045, 59092, 59133, 59154, 59165, 59169, 59179, 59189, 59194, 59214, 59215, 59219, 59222, 59237, 59249, 59257, 59259, 59269, 59277, 59285, 59292, 59302, 59311, 59323, 59328, 59347, 59356, 59361, 59371, 59690, 59699, 59719, 59745, 59761, 59834, 59840, 59843, 59849, 59855, 59860, 59871, 59877, 59888, 59900, 59927, 59952, 60008, 60052, 60073, 60091, 60138, 60171, 60176, 60179, 60310, 60320, 60504, 60506, 60508, 60510, 60512, 60515, 60519, 60521, 60524, 60555, 60585, 60592, 60768, 60814, 60824, 60847, 60862, 60907, 60912, 60915, 60958, 60968, 61031, 61037, 61074, 61078, 61080, 61082, 61094, 61099, 61101, 61110, 61116, 61118, 61157, 61158, 61165, 61218, 61253, 61259, 61370, 61419, 61441, 61508, 61685, 61738, 61743, 61846, 61877, 61881, 61899, 61903, 61932, 61979, 61987, 62040, 62068, 62104, 62115, 62130, 62139, 62160, 62166, 62234, 62241, 62243, 62263, 62270, 62283, 62297, 62400, 62413, 62416, 62425, 62431, 62433, 62437, 62445, 62448, 62460, 62470, 62477, 62506, 62522, 62598, 62602, 62917, 62926, 62965, 62991, 62998, 63004, 63013, 63115, 63156, 63229, 63233, 63259, 63279, 63307, 63317, 63364, 63368, 63371, 63376, 63379, 63427, 63450, 63475, 63614, 63615, 63630, 63677, 63689, 63727, 63752, 63758, 63783, 63786, 63815, 63821, 63842, 63867, 63901, 63929, 63979, 63992, 64138, 64178, 64193, 64197, 64205, 64209, 64217, 64222, 64242, 64377, 64395, 64402, 64457, 64478, 64483, 64509, 64619, 64624, 64658, 64667, 64675, 64724, 64854, 64855, 64862, 64977, 65087, 65096, 65150, 65154, 65182, 65187, 65190, 65193, 65197, 65200, 65204, 65207, 65211, 65214, 65218, 65295, 65303, 65353, 65354, 65377, 65383, 65594, 65627, 65631, 65707, 66072, 66116, 66204, 66211, 66240, 66248, 66258, 66387, 66412, 66425, 66463, 66530, 66544, 66565, 66580, 66662, 66727, 66744, 66975, 66987, 67005, 67049, 67091, 67096, 67105, 67142, 67148, 67166, 67170, 67210, 67211, 67215, 67219, 67249, 67262, 67266, 67290, 67305, 67307, 67318, 67321, 67354, 67358, 67385, 67393, 67401, 67414, 67416, 67422, 67426, 67441, 67443, 67451, 67504, 67582, 67650, 67656, 67689, 67769, 67804, 67823, 67923, 67950, 67968, 67977, 67995, 68040, 68044, 68081, 68085, 68101, 68133, 68235, 68362, 68367, 68381, 68403, 68410, 68427, 68438, 68510, 68512, 68598, 68613, 68619, 68693, 68806, 68829, 68832, 68859, 68864, 68867, 68874, 68880, 68943, 68962, 68968, 68981, 68983, 68986, 68989, 68991, 68994, 68997, 69024, 69031, 69033, 69042, 69069, 69082, 69101, 69353, 69366, 69381, 69527, 69568, 69569, 69570, 69572, 69575, 69576, 69577, 69578, 69601, 69605, 69724, 69737, 69753, 69820, 69838, 69845, 69874, 69913, 69929, 69935, 69951, 69966, 69975, 69982, 69985, 70598, 70618, 70824, 70831, 70832, 70845, 70906, 70908, 71043, 71053, 71127, 71227, 71255, 71258, 71280, 71298, 71311, 71323, 71326, 71330, 71335, 71353, 71361, 71363, 71368, 71376, 71378, 71382, 71384, 71386, 71389, 71431, 71434, 71442, 71443, 71445, 71447, 71450, 71453, 71454, 71465, 71468, 71478, 71489, 71501, 71512, 71517, 71584, 71637, 71645, 71655, 71657, 71703, 71879, 71883, 71893, 72015, 72024, 72025, 72027, 72028, 72029, 72100, 72120, 72131, 72136, 72145, 72195, 72198, 72207, 72220, 72224, 72275, 72295, 72300, 72301, 72371, 72372, 72375, 72393, 72401, 72730, 72777, 72781, 72852, 72854, 72882, 72884, 72988, 73004, 73033, 73046, 73057, 73133, 73151, 73155, 73158, 73170, 73173, 73198, 73222, 73233, 73238, 73309, 73315, 73527, 73537]

router.get(['/','/:id'], (req, res) => {
	const  {id}  = req.params;
	const find =(id != undefined&&id>0&&id<73584)?{ _id: id }:{};
	const query = new QueryBuilder('neighborhoods', { find, queryString: req.query });
	let sk = 0,lim=0,start=1,stop=0;
	if(query.skip&&!query.find) { sk = query.skip;}
	if(!query.find) { lim = query.limit;}

		for (let i = 0; i < disjson.length; i++) {
			if (sk>0&&start==1&&disjson[i]>sk){
				start=i;
			}
			if ((lim>0&&disjson[i]>sk+lim)||(query.find&&disjson[i]>id)){
				stop=i;
				break;
			}
		}
		let tmpnum = query.sql.indexOf('limit');
		if (tmpnum>1) {
			query.sql = query.sql.substring(0,tmpnum) +"where _id  between "+ (start) + " and " + (stop)
		} else {
			tmpnum = query.sql.indexOf('_id = ');
			query.sql = query.sql.substring(0,tmpnum + 6) + stop;
		}
		let datanew=[],ata;

	db.query(query.sql).then(data => {
		for (let i = 0; i <= stop-start; i++) {
			if(query.find){
				ata = {...data[0]};
				ata.neighborhoods = data[0].neighborhoods[(id - disjson[stop-1])];
				datanew.push(ata);
				break;
			};

			for (let z = (i==0&&sk>0)?sk-disjson[start-1]:0; z < data[i].neighborhoods.length; z++) {
				if(disjson[start+i-1]+z>sk+lim) break;
				ata= {...data[i]};
				ata.neighborhoods= data[i].neighborhoods[z];
				datanew.push(ata);
			}
		}
		data = datanew;
		res.send({ status: true, data, });
	}, err => res.status(500).send({ status: false, error: err }));
});

module.exports = router;
